#!/bin/bash

DIR=$1
PORT=$2

if [[ $DIR == "" ]]; then
    echo "Usage: $0 <log directory> [port]" >&2
    exit 1
fi

if [[ "$PORT" == "" ]]; then
    PORT=6006
fi
if [[ ! -d "$DIR" ]]; then
    echo "Error: '$DIR' does not exist" >&2
    exit 1
fi
pkill -f "tensorboard --port $PORT"
tensorboard --reload_interval 1 --port $PORT --logdir "$DIR" &
